---
areas:
  area_tags:
    - building
    - landuse
    - leisure
    # - natural
    - aeroway
  linear_tags:
    - highway
    - barrier
generalized_tables:
  waterareas_gen1:
    source: waterareas
    sql_filter: ST_Area(geometry)>50000.000000
    tolerance: 50
  waterareas_gen0:
    source: waterareas_gen1
    sql_filter: ST_Area(geometry)>500000.000000
    tolerance: 200
  roads_gen0:
    source: roads_gen1
    sql_filter:
    tolerance: 200
  roads_gen1:
    source: roads
    sql_filter:
      type IN ('motorway', 'motorway_link', 'trunk', 'trunk_link', 'primary',
      'primary_link', 'secondary', 'secondary_link', 'tertiary', 'tertiary_link')
      OR class IN('railway')
    tolerance: 50
  waterways_gen0:
    source: waterways_gen1
    sql_filter:
    tolerance: 200
  waterways_gen1:
    source: waterways
    sql_filter:
    tolerance: 50
  landusages_gen1:
    source: landusages
    sql_filter: ST_Area(geometry)>50000.000000
    tolerance: 50
  landusages_gen0:
    source: landusages_gen1
    sql_filter: ST_Area(geometry)>500000.000000
    tolerance: 200

tables:
  routes:
    type: relation
    relation_types:
      - route
    mapping:
      route:
        - hiking
        - bicycle
        - ski
        - horse
        - piste
        - foot
        - mtb
    columns:
      - type: id
        name: osm_id
      - type: string
        name: name
        key: name
      - type: string
        name: ref
        key: ref
      - type: string
        name: colour
        key: colour
      - type: string
        name: osmc:symbol
        key: osmc:symbol
      - type: string
        name: network
        key: network
      - type: mapping_value
        name: type

  route_members:
    type: relation_member
    relation_types:
      - route
    mapping:
      route:
        - hiking
        - bicycle
        - ski
        - horse
        - piste
        - foot
        - mtb
    columns:
      - type: id
        name: osm_id
      - type: member_id
        name: member
      - type: geometry
        name: geometry
      - type: member_role
        name: role
        key: role
      - type: member_type
        name: type

  landusages:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
      - type: webmerc_area
        name: area
      - args:
          values:
            - farmland
            - farm
            - grassland
            - golf_course
            - forest
            - wood
            - meadow
            - heath
            - bare_rock
            - fell
            - industrial
            - residential
            - commercial
            - retail
            - farmyard
            - zoo
            - recreation_ground
            - grass
            - wetland
            - village_green
            - school
            - university
            - college
            - allotments
            - garden
            - park
            - railway
            - quarry
            - scree
            - landfill
            - vineyard
            - orchard
            - scrub
            - clearcut
            - hospital
            - sports_centre
            - place_of_worship
            - cemetery
            - theatre
            - cinema
            - parking
            - fuel
            - baracks
            - library
            - pitch
            - playground
            - footway
            - pedestrian
        type: enumerate
        name: z_order
    type: polygon
    mapping:
      man_made:
        - pier
        - clearcut
      amenity:
        - university
        - school
        - college
        - library
        - fuel
        - parking
        - cinema
        - theatre
        - place_of_worship # TODO to separate table
        - hospital
      barrier:
        - hedge
      leisure:
        - park
        - garden
        - playground
        - golf_course
        - sports_centre
        - pitch
        - stadium
        - dog_park # TODO
        - horse_riding # TODO
      tourism:
        - zoo
      natural:
        - wood
        - scrub
        - wetland
        - heath
        - grassland
        - beach
        - sand
        - moor
        - fell
        - bare_rock
        - scree
      aeroway:
        - runway
        - taxiway
      military:
        - barracks
      landuse:
        - park
        - forest
        - residential
        - retail
        - commercial
        - industrial
        - railway
        - cemetery
        - grass
        - farmyard
        - farm
        - farmland
        - orchard
        - vineyard
        - wood
        - meadow
        - village_green
        - recreation_ground
        - allotments
        - quarry
        - landfill
        - brownfield
        - greenfield
        - depot
        - garages
        - military
        - plant_nursery
      highway:
        - pedestrian
        - footway

  buildings:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
    type: polygon
    mapping:
      building:
        - __any__

  shops:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
    type: point
    mapping:
      shop:
        - __any__

  shop_polys:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
    type: polygon
    mapping:
      shop:
        - __any__

  places:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
      - args:
          values:
            - locality
            - suburb
            - hamlet
            - village
            - town
            - city
            - county
            - region
            - state
            - country
        type: enumerate
        name: z_order
      - type: integer
        name: population
        key: population
    type: point
    mapping:
      place:
        - country
        - state
        - region
        - county
        - city
        - town
        - village
        - hamlet
        - suburb
        - locality

  # TODO this is unused
  transport_polys:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
    type: polygon
    mapping:
      public_transport:
        - platform
      highway:
        - platform
      railway:
        - station
        - platform
      aeroway:
        - aerodrome
        - terminal
        - helipad
        - apron

  admin:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
      - type: integer
        name: admin_level
        key: admin_level
    type: linestring
    mapping:
      boundary:
        - administrative

  aeroways:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
    type: linestring
    mapping:
      aeroway:
        - runway
        - taxiway

  waterways:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: bool
        name: intermittent
        key: intermittent
      - type: bool
        name: seasonal
        key: seasonal
      - type: bool
        name: tunnel
        key: tunnel
      - type: mapping_value
        name: type
    type: linestring
    mapping:
      waterway:
        - river
        - canal
        - stream
        - drain
        - ditch

  barrierways:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
    type: linestring
    mapping:
      barrier:
        - city_wall
        - fence
        - hedge
        - retaining_wall
        - wall
        - spikes
        - embankment
        - "yes"
        - wire_fence

  # TODO this is unused
  # TODO merge with feature points
  transports:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
      - type: string
        name: ref
        key: ref
    type: point
    mapping:
      railway:
        - station
        - halt
        - tram_stop
        - crossing
        - level_crossing
        - subway_entrance
      aeroway:
        - aerodrome
        - terminal
        - helipad
        - gate
      highway:
        - motorway_junction
        - turning_circle
        - bus_stop

  barrierpoints:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
    type: point
    mapping:
      barrier:
        - __any__ # TODO only lift_gate and swing_gate is renderred now

  feature_lines:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
    type: linestring
    mapping:
      natural:
        - cliff
        - valley
        - tree_row
        - ridge # TODO
        - gully
        - earth_bank
      power:
        - line
        - minor_line
      man_made:
        - cutline
        - embankment
        - dyke
        - pipeline # TODO
      millitary:
        - trench
      barrier:
        - ditch # TODO

  protected_areas:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
    type: polygon
    mapping:
      boundary:
        - national_park
        - protected_area
      leisure:
        - nature_reserve

  features:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: ele
        key: ele
      - type: mapping_value
        name: type
    type: point
    mappings:
      attractions:
        mapping:
          tourism:
            - attraction # must be separate otherwise it wins against other types
      standard:
        mapping:
          natural:
            - birds_nest
            - cave_entrance
            - geyser
            - hot_spring
            - peak
            - rock
            - saddle
            - sinkhole
            - spring
            - stone
            - tree
            - arch # TODO
          waterway:
            - waterfall
          amenity:
            - atm
            - bank
            - bar
            - bbq
            - bench
            - bicycle_parking
            - bicycle_rental
            - biergarten
            - bus_station
            - cafe
            - car_wash
            - cinema
            - clinic
            - college
            - community_centre
            - dentist
            - doctors
            - drinking_water
            - fast_food
            - feeding_place
            - fire_station
            - fountain
            - fuel
            - game_feeding
            - hospital
            - hunting_stand
            - ice_cream
            - kindergarten
            - library
            - pharmacy
            - police
            - post_box
            - post_office
            - pub
            - recycling
            - restaurant
            - school
            - swimming_pool
            - taxi
            - telephone
            - theatre
            - toilets
            - townhall
            - university
            - veterinary
            - waste_basket
            - waste_disposal
            - water_point
            - watering_place
          tourism:
            - alpine_hut
            - apartment
            - artwork
            - cabin
            - camp_site
            - caravan_site
            - castle
            - chalet
            - guest_house
            - hostel
            - hotel
            - hut
            - memorial
            - monument
            - motel
            - museum
            - picnic_site
            - viewpoint
            - wilderness_hut
            - zoo
          leisure:
            - picnic_table
            - playground
            - firepit
            - water_park
            - dog_park # TODO
            - horse_riding # TODO
          man_made:
            - adit
            - beehive
            - bunker_silo
            - chimney
            - communications_tower
            - cross
            - mine
            - mineshaft
            - reservoir_covered
            - silo
            - water_tower
            - water_well
            - water_works
            - pumping_station
            - wastewater_plant
          historic:
            - archaeological_site
            - boundary_stone
            - bunker
            - castle
            - manor
            - memorial
            - mine
            - mine_shaft
            - monastery
            - monument
            - wayside_cross
            - wayside_shrine
          power:
            - pole
            - tower
          military:
            - bunker
          sport:
            - dog_racing # TODO
            - horse_racing # TODO
          emergency:
            - access_point

  shelters:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: type
        key: shelter_type
      - type: string
        name: ele
        key: ele
    type: point
    mapping:
      amenity:
      - shelter

  shelter_polys:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: type
        key: shelter_type
      - type: string
        name: ele
        key: ele
    type: polygon
    mapping:
      amenity:
      - shelter

  feature_polys:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: ele
        key: ele
      - type: mapping_value
        name: type
      - type: webmerc_area # TODO
        name: area
    type: polygon
    mappings:
      attractions:
        mapping:
          tourism:
            - attraction # must be separate otherwise it wins against other types
      standard:
        mapping:
          natural:
            - rock
            - stone
          amenity:
            - bank
            - bar
            - bbq
            - bicycle_parking
            - bicycle_rental
            - biergarten
            - bus_station
            - cafe
            - car_wash
            - cinema
            - clinic
            - college
            - community_centre
            - dentist
            - doctors
            - fast_food
            - feeding_place
            - fire_station
            - fountain
            - fuel
            - game_feeding
            - hospital
            - ice_cream
            - kindergarten
            - library
            - pharmacy
            - police
            - post_office
            - pub
            - recycling
            - restaurant
            - school
            - swimming_pool
            - taxi
            - theatre
            - toilets
            - townhall
            - university
            - veterinary
            - monastery
          tourism:
            - alpine_hut
            - apartment
            - artwork
            - cabin
            - camp_site
            - caravan_site
            - castle
            - chalet
            - guest_house
            - hostel
            - hotel
            - hut
            - monument
            - motel
            - museum
            - picnic_site
            - wilderness_hut
            - zoo
          leisure:
            - firepit
            - playground
            - water_park
          man_made:
            - adit
            - bunker_silo
            - chimney
            - communications_tower
            - cross
            - mine
            - mineshaft
            - reservoir_covered
            - silo
            - water_tower
            - water_works
            - pumping_station
            - wastewater_plant
          historic:
            - archaeological_site
            - bunker
            - castle
            - manor
            - memorial
            - mine
            - mine_shaft
            - monastery
            - monument
            - wayside_shrine
          military:
            - bunker
          sport:
            - dog_racing # TODO
            - horse_racing # TODO

  power_generators:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: source
        key: generator:source
      - type: string
        name: method
        key: generator:method
    type: point
    mapping:
      power:
        - generator

  power_generator_polys:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: source
        key: generator:source
      - type: string
        name: method
        key: generator:method
    type: polygon
    mapping:
      power:
        - generator

  ruins:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: type
        key: ruins
    type: point
    mapping:
      historic:
        - ruins

  ruin_polys:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: type
        key: ruins
    type: polygon
    mapping:
      historic:
        - ruins

  towers:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: ele
        key: ele
      - type: string
        name: type
        key: tower:type
      - type: mapping_value
        name: class
    type: point
    mappings:
      tower:
        mapping:
          man_made:
            - tower
      mast:
        mapping:
          man_made:
            - mast

  tower_polys:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: ele
        key: ele
      - type: string
        name: type
        key: tower:type
      - type: mapping_value
        name: class
    type: polygon
    mappings:
      tower:
        mapping:
          man_made:
            - tower
      mast:
        mapping:
          man_made:
            - mast

  place_of_worships:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: building
        key: building
      - type: string
        name: religion
        key: religion
    type: point
    mapping:
      amenity:
        - place_of_worship

  place_of_worship_polys:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: building
        key: building
      - type: string
        name: religion
        key: religion
    type: polygon
    mapping:
      amenity:
        - place_of_worship

  infopoints:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: string
        name: ele
        key: ele
      - type: bool
        name: foot
        key: foot
      - type: bool
        name: bicycle
        key: bicycle
      - type: bool
        name: ski
        key: ski
      - type: bool
        name: horse
        key: horse
      - type: mapping_value
        name: type
    type: point
    mapping:
      information:
        - guidepost
        - board
        - map
        - office

  aerialways:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: mapping_value
        name: type
      - type: string
        name: name
        key: name
      - type: string
        name: ref
        key: ref
    type: linestring
    mapping:
      aerialway:
        - __any__

  roads:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: mapping_value
        name: type
      - type: string
        name: name
        key: name
      - type: boolint
        name: tunnel
        key: tunnel
      - type: boolint
        name: embankment
        key: embankment
      - type: boolint
        name: bridge
        key: bridge
      - type: direction
        name: oneway
        key: oneway
      - type: enumerate
        name: cutting # TODO
        key: cutting
        args:
          values:
            - "yes"
            - left
            - right
      - type: string
        name: ref
        key: ref
      - type: wayzorder
        name: z_order
        key: layer
      - type: string
        name: access
        key: access
      - type: string
        name: bicycle
        key: bicycle
      - type: string
        name: foot
        key: foot
      - type: string
        name: vehicle
        key: vehicle
      - type: string
        name: service
        key: service
      - type: string
        name: tracktype
        key: tracktype
      - type: mapping_key
        name: class
    type: linestring
    filters:
      reject:
        area:
          - "yes"
    mappings:
      railway:
        mapping:
          railway:
            - abandoned
            - construction
            - disused
            - funicular
            - light_rail
            - monorail
            - narrow_gauge
            - preserved
            - rail
            - subway
            - tram
      roads:
        mapping:
          man_made:
            - pier
            - groyne
          highway:
            - motorway
            - motorway_link
            - trunk
            - trunk_link
            - primary
            - primary_link
            - secondary
            - secondary_link
            - tertiary
            - tertiary_link
            - road
            - path
            - track
            - service
            - footway
            - bridleway
            - cycleway
            - steps
            - pedestrian
            - living_street
            - unclassified
            - residential
            - raceway
            - platform
            - construction
            - piste # TODO
            - escape # TODO
            - corridor # TODO
            - bus_guideway # TODO
            - via_ferrata # TODO
          railway:
            - platform
          public_transport:
            - platform
          attraction:
            - water_slide # TODO

  housenumbers:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
      - type: string
        name: addr:housenumber
        key: addr:housenumber
      - type: string
        name: addr:streetnumber
        key: addr:streetnumber
      - type: string
        name: addr:conscriptionnumber
        key: addr:conscriptionnumber
    type: point
    mapping:
      addr:housenumber:
        - __any__
      addr:streetnumber:
        - __any__
      addr:conscriptionnumber:
        - __any__

  housenumbers_poly:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
      - type: string
        name: addr:housenumber
        key: addr:housenumber
      - type: string
        name: addr:streetnumber
        key: addr:streetnumber
      - type: string
        name: addr:conscriptionnumber
        key: addr:conscriptionnumber
    type: polygon
    mapping:
      addr:housenumber:
        - __any__
      addr:streetnumber:
        - __any__
      addr:conscriptionnumber:
        - __any__

  waterareas:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: string
        name: name
        key: name
      - type: mapping_value
        name: type
      - type: webmerc_area
        name: area
    type: polygon
    mapping:
      waterway:
        - riverbank
      landuse:
        - basin
        - reservoir
      natural:
        - water
      amenity:
        - swimming_pool
      leisure:
        - swimming_pool

  fixmes:
    columns:
      - type: id
        name: osm_id
      - type: geometry
        name: geometry
      - type: mapping_value
        name: type
    type: point
    mapping:
      fixme:
        - __any__
